<!DOCTYPE html>
<html lang="en" layout:decorate="~{layout/layout_form}">
<th:blcok layout:fragment="content">

    <head>
        <meta charset="UTF-8">
        <title>I5-29 > 인사 관리</title>
        <link href="/css/hrms/hrms.css" rel="stylesheet" />

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.css"
            integrity="sha512-3pIirOrwegjM6erE5gPSwkUzO+3cTjpnV9lexlNZqvupR64iZBnOOTiiLPb9M36zpMScbmUNIcHUqKD47M719g=="
            crossorigin="anonymous" referrerpolicy="no-referrer" />
    </head>

    <body>
        <div id="empList">
            <!-- 인사 관리 페이지 시작 -->
            <div id="layoutSidenav_content">
                <main>
                    <!-- 메뉴 네비게이터 -->
                    <header class="page-header page-header-compact page-header-light border-bottom bg-white">
                        <div class="container-fluid">
                            <div class="page-header-content">
                                <div class="row align-items-center justify-content-between pt-3">
                                    <div class="col-auto mb-3">
                                        <h1 class="page-header-title">
                                            <div class="page-header-icon"><i data-feather="user"></i></div>
                                            HRMS - 사원 조회
                                        </h1>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </header>
                    <!-- page header background -->
                    <header class="page-header page-header-dark bg-gray-900 pb-10">
                        <div class="container">
                            <div class="page-header-content pt-2">
                            </div>
                        </div>
                    </header>
                    <!-- Main content: 사원 검색 & 사원 리스트 -->
                    <div class="container mt-n10">
                        <div class="card mb-4">
                            <div class="card-header">사원 리스트</div>
                            <div class="boardTop">
                                <div class="card-body">
                                    <div>
                                        <span>총 {{ empList.length }} 명의 사원 중 검색 결과 : {{ pageList.length }} 명</span>
                                        <!-- Button trigger modal -->
                                        <button type="button" class="btn btn-hrms button-middle" data-bs-toggle="modal"
                                            data-bs-target="#empRegistModal">
                                            사원 등록
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <form onsubmit="return false">
                                        <!-- 사원 검색 Form Row -->
                                        <div class="form-row">
                                            <!-- 부서 검색 -->
                                            <div class="form-group col-md-1-3">
                                                <label for="departmentFormControlSelect">부서</label>
                                                <select class="form-select form-control-solid"
                                                    id="departmentFormControlSelect" v-model="department"
                                                    @change="setDepartments(department)">
                                                    <option selected>전체</option>
                                                    <option v-for="(department, i) in departmentList"
                                                        key="department.departmentname">{{ department.departmentname
                                                        }}
                                                    </option>
                                                </select>
                                            </div>
                                            <!-- 직급 검색 -->
                                            <div class="form-group col-md-1-3">
                                                <label for="gradeFormControlSelect">직급</label>
                                                <select class="form-select form-control-solid"
                                                    id="gradeFormControlSelect" v-model="grade"
                                                    @change="setGrades(grade)">
                                                    <option selected>전체</option>
                                                    <option v-for="(grade, i) in gradeList" key="grade.gradename">{{
                                                        grade.gradename }}</option>
                                                </select>
                                            </div>
                                            <!-- 재직여부 검색 -->
                                            <div class="form-group col-md-1-3">
                                                <label for="retireFormControlSelect">재직여부</label>
                                                <select class="form-select form-control-solid"
                                                    id="retireFormControlSelect" v-model="retireyn"
                                                    @change="setRetireyn(retireyn)">
                                                    <option value="전체">전체</option>
                                                    <option value="n" selected>재직자</option>
                                                    <option value="y">퇴사자</option>
                                                </select>
                                            </div>
                                            <!-- 입사일자 검색 (Date Range Picker) -->
                                            <div class="form-group col-md-1-5">
                                                <label for="entrydate">입사일자&nbsp;</label>
                                                <i class="mr-2 text-primary" data-feather="calendar"></i>
                                                <input type="date" id="entrydatestart" v-model="entrydatestart"
                                                    class="form-control form-control-solid"
                                                    @change="setEntrydateStart(entrydatestart)"
                                                    style="padding-top: 015px; padding-bottom: 15px; padding-right: 8px;" />
                                            </div>
                                            <div class="form-group col-md-1-5">
                                                <label for="retiredate">&nbsp;</label>
                                                <input type="date" id="entrydateend" v-model="entrydateend"
                                                    class="form-control form-control-solid"
                                                    @change="setEntrydateEnd(entrydateend)"
                                                    style="padding-top: 015px; padding-bottom: 15px; padding-right: 8px;" />
                                            </div>
                                            <!-- 퇴사일자 검색 (Date Range Picker) -->
                                            <!-- <div class="form-group col-md-1-5">
                                                <label for="retiredate">퇴사일자&nbsp;</label>
                                                <i class="mr-2 text-primary" data-feather="calendar"></i>
                                                <input type="date" id="retiredatestart" v-model="retiredatestart"
                                                    class="form-control form-control-solid"
                                                    @change="setRetiredateStart(retiredatestart)" />
                                            </div>
                                            <div class="form-group col-md-1-5">
                                                <label for="retiredate">&nbsp;</label>
                                                <input type="date" id="retiredateend" v-model="retiredateend"
                                                    class="form-control form-control-solid"
                                                    @change="setRetiredateEnd(retiredateend)" />
                                            </div> -->
                                            <!-- text 검색 -->
                                            <div class="form-group col-md-4">
                                                <label for="textFormControlSelect">&nbsp;</label>
                                                <div class="input-group input-group-joined input-group-solid">
                                                    <select class="form-select form-control-solid"
                                                        id="textFormControlSelect" v-model="menu"
                                                        @change="setMenu(menu)">
                                                        <option value="전체" selected>전체</option>
                                                        <option value="searchName">사원명</option>
                                                        <option value="searchEmpno">사번</option>
                                                    </select>
                                                    <input class="form-control form-control-sm" type="text"
                                                        placeholder="사번, 이름, 연락처, 이메일 검색 가능" aria-label="Search"
                                                        v-model="search" @change="searchEmp(search)"
                                                        style="width: 174px;">
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                    <!-- 사원 리스트 출력 -->
                                    <div class="datatable">
                                        <table class="table table-bordered table-hover" width="100%" cellspacing="0">
                                            <thead>
                                                <tr>
                                                    <th class="d-none d-xl-table-cell"
                                                        v-for="(headerNameList, i) in headerNameList" :key="i"
                                                        style="text-align: center;">{{
                                                        headerNameList }}</th>
                                                </tr>
                                            </thead>
                                            <tbody v-for="(emp, i) in paginatedData" key="i">
                                                <tr>
                                                    <td class="d-none d-xl-table-cell emp-content">{{ emp.empno }}</td>
                                                    <td class="d-none d-xl-table-cell">{{ emp.name }}</td>
                                                    <td class="d-none d-xl-table-cell">{{ emp.departmentname
                                                        }}</td>
                                                    <td class="emp-content"><span class="badge bg-success">{{
                                                            emp.gradename
                                                            }}</span>
                                                    </td>
                                                    <td class="d-none d-xl-table-cell">{{ parsetel(emp.tel) }}</td>
                                                    <td class="d-none d-xl-table-cell">{{ emp.mail }}</td>
                                                    <td class="d-none d-xl-table-cell">{{ currency(emp.salary) }}</td>
                                                    <td class="d-none d-xl-table-cell emp-content">
                                                        <span v-show="emp.retireyn === 'n'"
                                                            class="text-success ">재직</span>
                                                        <span v-show="emp.retireyn === 'y'"
                                                            class="emp-opacity">퇴직</span>
                                                        <span v-show="emp.restyn === 'y'"
                                                            class="badge badge-light">휴직중</span>
                                                    </td>
                                                    <td class="d-none d-xl-table-cell">{{ emp.entrydate }}
                                                    </td>
                                                    <td class="d-none d-xl-table-cell">{{ emp.retiredate }}
                                                    </td>
                                                    <td class="emp-content" style="width: 75px;">
                                                        <button type="button" class="btn btn-hrms btn-xs"
                                                            data-bs-toggle="modal" data-bs-target="#empDetailModal"
                                                            @click="getEmp(i)">상세조회
                                                        </button>
                                                    </td>
                                                    <td class="emp-content" style="width: 75px;">
                                                        <button type="button" class="btn btn-hrms btn-xs"
                                                            data-bs-toggle="modal"
                                                            data-bs-target="#empPromotionManageModal"
                                                            v-if="emp.retireyn === 'n'" @click="getEmp(i)">인사발령
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <footer>
                                        <!-- 페이징 -->
                                        <div class="btn-cover" style="text-align: right">
                                            <button :disabled="pageNum === 0" @click="prevPage" class="btn-hrms">
                                                이전
                                            </button>
                                            <span class="page-count">{{ pageNum + 1 }} / {{ pageCount }}
                                                페이지</span>
                                            <button :disabled="pageNum >= pageCount - 1" @click="nextPage"
                                                class="btn-hrms">
                                                다음
                                            </button>
                                        </div>
                                    </footer>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>

            <!-- 사원 상세 조회 모달 시작 -->
            <div class="col-xl-8">
                <div class="modal " id="empDetailModal" data-bs-backdrop="static" data-bs-keyboard="false"
                    data-bs-show="false" tabindex="-1" role="dialog" aria-labelledby="empDetailModalLabel"
                    aria-hidden="true" style="z-index:1051;">
                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                        <div class="modal-content" style="width: 750px; height: 900px;">
                            <div class="modal-body p-0">
                                <!-- details card -->
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <span>사원 상세 조회</span>
                                        <button type="button" class="btn btn-outline-dark shadow-sm btn-sm emp-gray"
                                            style="width: 4rem; float: right;" data-bs-dismiss="modal">닫기
                                        </button>
                                    </div>
                                    <!-- card-body -->
                                    <div class="card-body pb-3" id="card-body-padding">
                                        <form>
                                            <div id="card-scroll">
                                                <!-- Form Row 1 (기본 정보 조회) -->
                                                <div class="form-row">
                                                    <!-- Form Group (사원 증명사진) -->
                                                    <div class="form-group col-md-4" style="text-align: center">
                                                        <img class="emp-idPicture" :src="physicalpath"
                                                            onerror="this.src='/images/noProfile.png'" />
                                                        <input class="form-control form-control-sm"
                                                            id="detail-idPicture" v-model="file" type="file"
                                                            @change="uploadImage" accept="image/*" />
                                                        <div class="invalid-feedback">
                                                            사원의 증명사진을 첨부해주세요.
                                                        </div>
                                                    </div>
                                                    <!-- Form Group (개인정보) -->
                                                    <div class="form-group col-md-4">
                                                        <label label class="small mb-1" for="empno">사번</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="detail-empno" :value="empDetail.empno" readonly>

                                                        <label label class="small mb-1" for="name">사원명</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="detail-name" v-model="name">
                                                        <label label class="small mb-1" for="regno">주민등록번호</label>
                                                        <div>
                                                            <input type="text" class="form-control form-control-sm"
                                                                id="detail-regno1" :value="prevregno"
                                                                style="width: 47%; display: inline-block" readonly>-
                                                            <input type="text" class="form-control form-control-sm"
                                                                id="detail-regno2" :value="sufregno"
                                                                style="width: 48%; display: inline-block;" readonly>
                                                        </div>
                                                        <label label class="small mb-1" for="tel">연락처</label>
                                                        <div>
                                                            <input maxlength='3' type="tel"
                                                                class="form-control form-control-sm" id="detail-tel1"
                                                                v-model="tel1"
                                                                onkeyup="next(this.value, 3, 'detail-tel2'); preventKr(this)"
                                                                onkeydown="checkNum(event, this.value)"
                                                                style="width: 30%; display: inline-block;">-
                                                            <input maxlength='4' type="tel"
                                                                class="form-control form-control-sm" id="detail-tel2"
                                                                v-model="tel2"
                                                                onkeyup="next(this.value, 4, 'detail-tel3'); preventKr(this)"
                                                                onkeydown="checkNum(event, this.value)"
                                                                style="width: 30%; display: inline-block;">-
                                                            <input maxlength='4' type="tel"
                                                                class="form-control form-control-sm" id="detail-tel3"
                                                                v-model="tel3" onkeyup="preventKr(this)"
                                                                onkeydown="checkNum(event, this.value)"
                                                                style="width: 30%; display: inline-block;">
                                                        </div>
                                                    </div>
                                                    <!-- Form Group (개인정보2) -->
                                                    <div class="form-group col-md-4">
                                                        <label label class="small mb-1"></label>
                                                        <div class="form-control form-control-sm"
                                                            style="border: #ffffff;"></div>
                                                        <label label class="small mb-1" for="gender">성별</label>
                                                        <div class="form-control form-control-sm border-0">
                                                            <div class="form-check form-check-inline col-md-5">
                                                                <input class="form-check-input" type="radio"
                                                                    name="gender" id="detail-gender-m" value="남"
                                                                    v-model="empDetail.gender"
                                                                    :checked="empDetail.gender === '남'" disabled>
                                                                <label class="form-check-label" for="gender">남</label>
                                                            </div>
                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio"
                                                                    name="gender" id="detail-gender-f" value="여"
                                                                    v-model="empDetail.gender"
                                                                    :checked="empDetail.gender === '여'" disabled>
                                                                <label class="form-check-label" for="gender">여</label>
                                                            </div>
                                                        </div>
                                                        <label label class="small mb-1" for="school">최종학력</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="detail-school" v-model="school">
                                                        <label label class="small mb-1" for="mail">이메일</label>
                                                        <input type="email" class="form-control form-control-sm"
                                                            id="detail-mail" v-model="mail">
                                                    </div>
                                                </div>
                                                <!-- Form Row 2 (주소) -->
                                                <div class="form-row">
                                                    <!-- Form Group (주소) -->
                                                    <div class="form-group col-md-12">
                                                        <label class="small mb-1" for="addr">주소</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="detail-addr" v-model="addr">
                                                    </div>
                                                    <!-- Form Group (상세주소) -->
                                                    <div class="form-group col-md-8">
                                                        <label class="small mb-1" for="addrdetail">상세주소</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="detail-addrdetail" v-model="addrdetail">
                                                    </div>
                                                    <!-- Form Group (우편번호) -->
                                                    <div class="form-group col-md-4">
                                                        <label class="small mb-1" for="zipcode">우편번호</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="detail-zipcode" v-model="zipcode" maxlength="6">
                                                    </div>
                                                </div>
                                                <!-- Form Row 3 (월급통장) -->
                                                <div class="form-row">
                                                    <!-- Form Group (은행) -->
                                                    <div class="form-group col-md-4">
                                                        <label class="small mb-1" for="bankcd">은행</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            v-model="empDetail.bankcd" id="detail-bankcd"
                                                            :value="empDetail.bankname" readonly>
                                                    </div>
                                                    <!-- Form Group (계좌번호) -->
                                                    <div class="form-group col-md-8">
                                                        <label class="small mb-1" for="account">계좌번호</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            :value="empDetail.account" id="detail-account" readonly>
                                                    </div>
                                                </div>
                                                <!-- Form Row 4 (부서/직급/권한) -->
                                                <div class="form-row">
                                                    <!-- Form Group (부서) -->
                                                    <div class="form-group col-md-4">
                                                        <label class="small mb-1" for="departmentcd">부서</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="detail-departmentcd" :value="empDetail.departmentname"
                                                            readonly>
                                                    </div>
                                                    <!-- Form Group (직급) -->
                                                    <div class="form-group col-md-4">
                                                        <label class="small mb-1" for="gradecd">직급</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="detail-gradecd" :value="empDetail.gradename" readonly>
                                                    </div>
                                                    <!-- Form Group (권한) -->
                                                    <div class="form-group col-md-4">
                                                        <label class="small mb-1" for="usertype">권한</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="detail-usertype" :value="empDetail.username" readonly>
                                                    </div>
                                                </div>
                                                <!-- Form Row 5 (재직여부/입사일/퇴사일) -->
                                                <div class="form-row">
                                                    <!-- Form Group (재직구분) -->
                                                    <div class="form-group col-md-4">
                                                        <label label class="small mb-1" for="empStatus">재직구분</label>
                                                        <div class="form-control form-control-sm border-0"
                                                            id="detail-empStatus">
                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio"
                                                                    name="empStatus" id="detail-retire_n" value="n"
                                                                    :checked="empDetail.retireyn === 'n'" disabled>
                                                                <label class="form-check-label" for="retire_n"
                                                                    readonly>재직</label>
                                                            </div>
                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio"
                                                                    name="empStatus" id="detail-rest_y" value="y"
                                                                    :checked="empDetail.restyn === 'y'" disabled>
                                                                <label class="form-check-label" for="rest_y">휴직</label>
                                                            </div>
                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio"
                                                                    name="empStatus" id="detail-retire_y" value="y"
                                                                    :checked="empDetail.retireyn === 'y'" disabled>
                                                                <label class="form-check-label" for="retire_y"
                                                                    readonly>퇴직</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Form Group (입사일) -->
                                                    <div class="form-group col-md-4">
                                                        <label class="small mb-1" for="entrydate">입사일</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="detail-entrydate" :value="empDetail.entrydate" readonly>
                                                    </div>
                                                    <!-- Form Group (퇴사일) -->
                                                    <div class="form-group col-md-4">
                                                        <label class="small mb-1" for="retiredate">퇴사일</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="detail-retiredate" :value="empDetail.retiredate"
                                                            readonly>
                                                    </div>
                                                </div>
                                                <!-- Form Row 6 (경력연차/연봉/퇴직금) -->
                                                <div class="form-row">
                                                    <!-- Form Group (경력연차) -->
                                                    <div class="form-group col-md-4">
                                                        <label label class="small mb-1" for="careeryears">경력연차</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="detail-careeryears" :value="careeryears" readonly>
                                                    </div>
                                                    <!-- Form Group (연봉) -->
                                                    <div class="form-group col-md-4">
                                                        <label class="small mb-1" for="yearsalary">연봉</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="detail-yearsalary"
                                                            :value="currency(empDetail.yearsalary)" readonly>
                                                    </div>
                                                    <!-- Form Group (퇴직금) -->
                                                    <div class="form-group col-md-4">
                                                        <label label class="small mb-1" for="retirementpay">퇴직금</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="detail-retirementpay"
                                                            :value="currency(empDetail.retirementpay)" readonly>
                                                    </div>
                                                </div>
                                                <!-- 기타 -->
                                                <div class="form-row">
                                                    <!-- Form Group (퇴사사유) -->
                                                    <div class="form-group col-md-12">
                                                        <label class="small mb-1" for="retirenote">퇴사사유</label>
                                                        <textarea class="form-control" id="detail-retirenote"
                                                            :value="empDetail.retirenote" rows="1" readonly></textarea>
                                                    </div>
                                                    <!-- Form Group (비고) -->
                                                    <div class="form-group col-md-12">
                                                        <label class="small mb-1" for="memo">비고</label>
                                                        <textarea class="form-control" id="detail-memo" v-model="memo"
                                                            rows="3"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- 버튼 -->
                                            <div class="modal-footer" style="justify-content: space-between;">
                                                <button type="button"
                                                    class="btn btn-outline-danger shadow-sm btn-sm emp-gray"
                                                    data-bs-target="#empRetireModal" data-bs-toggle="modal"
                                                    @click="closeModal('#empDetailModal')"
                                                    v-if="empDetail.retireyn === 'n'">퇴사 처리
                                                </button>
                                                <button type="button"
                                                    class="btn btn-outline-success shadow-sm btn-sm emp-gray"
                                                    data-bs-target="#empDetailUpdateModal" data-bs-toggle="modal"
                                                    v-if="empDetail.retireyn === 'n'">정보 수정
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- 사원 상세 조회 모달 끝 -->

            <!-- 사원 정보 수정 시 경고 모달 시작 -->
            <div class="col-xl-8">
                <div class="modal" id="empDetailUpdateModal" data-bs-backdrop="static" data-bs-keyboard="false"
                    tabindex="-1" role="dialog" aria-labelledby="empDetailUpdateModalLabel" aria-hidden="true"
                    style="z-index:1071;">
                    <div class="modal-dialog modal-dialog-centered madal-default" role="document">
                        <div class="modal-content">
                            <div class="modal-body p-0">
                                <!-- details card -->
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <span>정보 수정</span>
                                        <button type="button" class="btn btn-outline-dark shadow-sm btn-sm emp-gray"
                                            style="width: 4rem; float: right;" data-bs-dismiss="modal">닫기
                                        </button>
                                    </div>
                                    <!-- card-body -->
                                    <div class="card-body pb-3" id="card-body-padding">
                                        <form>
                                            <div class="emp-content">
                                                정말로 수정 하시겠습니까?
                                            </div>
                                            <!-- 버튼 -->
                                            <div class="text-center">
                                                <div class="modal-footer">
                                                    <button type="button" style="width: 4rem;"
                                                        class="btn btn-outline-dark shadow-sm btn-sm emp-gray"
                                                        @click="closeModal('#empDetailUpdateModal')"
                                                        data-bs-target="#empDetailModal" data-bs-toggle="modal">이전
                                                    </button>
                                                    <button id="update" type="button" style="width: 4rem;"
                                                        class="btn btn-outline-success shadow-sm btn-sm emp-gray"
                                                        @click="update" data-bs-toggle="modal" v-on:submit.prevent>수정
                                                    </button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- 사원 정보 수정 시 경고 모달 끝 -->



            <!-- 사원 퇴사 처리 모달 시작 -->
            <div class="col-xl-8">
                <div class="modal " id="empRetireModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                    role="dialog" aria-labelledby="empRetireModalLabel" aria-hidden="true" style="z-index:1061;">
                    <div class="modal-dialog modal-dialog-centered madal-default" role="document">
                        <div class="modal-content">
                            <div class="modal-body p-0">
                                <!-- details card -->
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <span>사원 퇴사 처리</span>
                                        <button type="button" class="btn btn-outline-dark shadow-sm btn-sm emp-gray"
                                            style="width: 4rem; float: right;" data-bs-dismiss="modal">닫기
                                        </button>
                                    </div>
                                    <!-- card-body -->
                                    <div class="card-body pb-3" id="card-body-padding">
                                        <form>
                                            <div id="card-scroll">
                                                <!-- Form Row 1 (기본 정보 조회) -->
                                                <div class="form-row">
                                                    <!-- Form Group (개인정보) -->
                                                    <div class="form-group col-md-6">
                                                        <label label class="small mb-1" for="empno">사번</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            :value="empDetail.empno" readonly>
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <label label class="small mb-1" for="name">사원명</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            v-model="empDetail.name" readonly>
                                                    </div>
                                                </div>
                                                <!-- Form Row 5 (재직여부/입사일/퇴사일 등록) -->
                                                <div class="form-row">
                                                    <!-- Form Group (입사일) -->
                                                    <div class="form-group col-md-6">
                                                        <label class="small mb-1" for="entrydate">입사일</label>
                                                        <input type="text" class="form-control form-control-sm"
                                                            :value="empDetail.entrydate" readonly>
                                                    </div>
                                                    <!-- Form Group (퇴사일) -->
                                                    <div class="form-group col-md-6">
                                                        <label class="small mb-1" for="retiredate">퇴사일</label>
                                                        <input type="date" class="form-control form-control-sm"
                                                            v-model="empDetail.retiredate">
                                                    </div>
                                                </div>
                                                <!-- 기타 -->
                                                <div class="form-row">
                                                    <!-- Form Group (퇴사사유 등록) -->
                                                    <div class="form-group col-md-12">
                                                        <label class="small mb-1" for="retirenote">퇴사사유</label>
                                                        <textarea class="form-control" v-model="empDetail.retirenote"
                                                            rows="3"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- 버튼 -->
                                            <div class="text-center">
                                                <div class="modal-footer">
                                                    <button type="button"
                                                        class="btn btn-outline-dark shadow-sm btn-sm emp-gray"
                                                        data-bs-target="#empDetailModal" data-bs-toggle="modal"
                                                        @click="closeModal('#empRetireModal');" style="width: 4rem">이전
                                                    </button>
                                                    <button type="button"
                                                        class="btn btn-outline-danger shadow-sm btn-sm emp-gray"
                                                        data-bs-target="#empRetireCheckModal" data-bs-toggle="modal"
                                                        @click="closeModal('#empRetireModal')">퇴사
                                                        처리
                                                    </button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- 사원 퇴사 처리 모달 끝 -->

            <!-- 사원 퇴사 처리 시 경고 모달 시작 -->
            <div class="col-xl-8">
                <div class="modal" id="empRetireCheckModal" data-bs-backdrop="static" data-bs-keyboard="false"
                    tabindex="-1" role="dialog" aria-labelledby="empRetireCheckModalLabel" aria-hidden="true"
                    style="z-index:1071;">
                    <div class="modal-dialog modal-dialog-centered madal-default" role="document">
                        <div class="modal-content">
                            <div class="modal-body p-0">
                                <!-- details card -->
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <span>사원 퇴사 처리</span>
                                        <button type="button" class="btn btn-outline-dark shadow-sm btn-sm emp-gray"
                                            style="width: 4rem; float: right;" data-bs-dismiss="modal">닫기
                                        </button>
                                    </div>
                                    <!-- card-body -->
                                    <div class="card-body pb-3" id="card-body-padding">
                                        <form>
                                            <div class="emp-content">
                                                정말로 퇴사 처리 하시겠습니까?
                                            </div>
                                            <!-- 버튼 -->
                                            <div class="text-center">
                                                <div class="modal-footer">
                                                    <button type="button"
                                                        class="btn btn-outline-dark shadow-sm btn-sm emp-gray"
                                                        data-bs-target="#empRetireModal" data-bs-toggle="modal"
                                                        @click="closeModal('#empRetireCheckModal');"
                                                        style="width: 4rem">이전
                                                    </button>
                                                    <button type="button" id="retire"
                                                        class="btn btn-outline-danger shadow-sm btn-sm emp-gray"
                                                        @click="retire" data-bs-toggle="modal">퇴사 처리
                                                    </button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- 사원 퇴사 처리 시 경고 모달 끝 -->

            <!-- 사원 승진 및 보직 관리 모달 시작 -->
            <div class="col-xl-8">
                <div class="modal " id="empPromotionManageModal" data-bs-backdrop="static" data-bs-keyboard="false"
                    tabindex="-1" role="dialog" aria-labelledby="empPromotionManageModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered madal" role="document">
                        <div class="modal-content">
                            <div class="modal-body p-0">
                                <!-- details card -->
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <span>사원 승진 및 보직 관리</span>
                                        <button type="button" class="btn btn-outline-dark shadow-sm btn-sm emp-gray"
                                            style="width: 4rem; float: right;" data-bs-dismiss="modal">닫기
                                        </button>
                                    </div>
                                    <div class="card-header border-bottom">
                                        <!-- Wizard navigation-->
                                        <div class="nav nav-pills nav-justified flex-column flex-xl-row nav-wizard"
                                            id="cardTab" role="tablist">
                                            <!-- Wizard navigation item 1 -->
                                            <a class="nav-item nav-link active" id="wizard1-tab" href="#wizard1"
                                                data-toggle="tab" role="tab" aria-controls="wizard1"
                                                aria-selected="true">
                                                <div class="wizard-step-icon">1</div>
                                                <div class="wizard-step-text">
                                                    <div class="wizard-step-text-name">직급 관리</div>
                                                </div>
                                            </a>
                                            <!-- Wizard navigation item 2 -->
                                            <a class="nav-item nav-link" id="wizard2-tab" href="#wizard2"
                                                data-toggle="tab" role="tab" aria-controls="wizard2"
                                                aria-selected="false">
                                                <div class="wizard-step-icon">2</div>
                                                <div class="wizard-step-text">
                                                    <div class="wizard-step-text-name">부서 관리</div>
                                                </div>
                                            </a>
                                            <!-- Wizard navigation item 3 -->
                                            <a class="nav-item nav-link" id="wizard3-tab" href="#wizard3"
                                                data-toggle="tab" role="tab" aria-controls="wizard3"
                                                aria-selected="false">
                                                <div class="wizard-step-icon">3</div>
                                                <div class="wizard-step-text">
                                                    <div class="wizard-step-text-name">연봉 관리</div>
                                                </div>
                                            </a>
                                            <!-- Wizard navigation item 4 -->
                                            <a class="nav-item nav-link" id="wizard4-tab" href="#wizard4"
                                                data-toggle="tab" role="tab" aria-controls="wizard4"
                                                aria-selected="false">
                                                <div class="wizard-step-icon">4</div>
                                                <div class="wizard-step-text">
                                                    <div class="wizard-step-text-name">확 인</div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                    <!-- card-body -->
                                    <div class="card-body pb-3" id="card-body-padding">
                                        <form>
                                            <div class="tab-content" id="cardTabContent card-scroll">
                                                <!-- Wizard tab pane item 1 -->
                                                <div class="tab-pane py-5 py-xl-5 fade show active" id="wizard1"
                                                    role="tabpanel" aria-labelledby="wizard1-tab">
                                                    <div class="row justify-content-center">
                                                        <div class="col-xxl-6">
                                                            <h3 class="text-detault">Step 1</h3>
                                                            <h5 class="card-title">직급 변경</h5>
                                                            <form>
                                                                <!-- Form Row 1 (기본 정보 조회) -->
                                                                <div class="form-row">
                                                                    <div class="form-group col-md-4">
                                                                        <label label class="small mb-1"
                                                                            for="empno">사번</label>
                                                                        <input type="text"
                                                                            class="form-control form-control-sm"
                                                                            id="empno" v-model="empDetail.empno"
                                                                            readonly>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <label label class="small mb-1"
                                                                            for="name">사원명</label>
                                                                        <input type="text"
                                                                            class="form-control form-control-sm"
                                                                            v-model="empDetail.name" readonly>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <label label class="small mb-1" for="name">변경 전
                                                                            직급</label>
                                                                        <input type="text"
                                                                            class="form-control form-control-sm"
                                                                            v-model="prevgradename" readonly>
                                                                    </div>
                                                                </div>
                                                                <!-- Form Row 2 (직급 변경) -->
                                                                <div class="form-row">
                                                                    <div class="form-group col-md-12">
                                                                        <label class="small mb-1"
                                                                            for="gradecd">직급</label>
                                                                        <select id="changegrade"
                                                                            class="form-select form-select-sm"
                                                                            v-model="empDetail.gradecd"
                                                                            @change="savegradename">
                                                                            <option v-for="(grade, i) in gradeList"
                                                                                :key="i" :value="grade.gradecd">{{
                                                                                grade.gradename
                                                                                }}
                                                                            </option>
                                                                        </select>
                                                                        <div class="invalid-feedback">
                                                                            직급을 선택해주세요.
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Wizard tab pane item 2 -->
                                                <div class="tab-pane py-5 py-xl-5 fade" id="wizard2" role="tabpanel"
                                                    aria-labelledby="wizard2-tab">
                                                    <div class="row justify-content-center">
                                                        <div class="col-xxl-6">
                                                            <h3 class="text-detault">Step 2</h3>
                                                            <h5 class="card-title">부서 변경</h5>
                                                            <form>
                                                                <!-- Form Row 1 (기본 정보 조회) -->
                                                                <div class="form-row">
                                                                    <div class="form-group col-md-4">
                                                                        <label label class="small mb-1"
                                                                            for="empno">사번</label>
                                                                        <input type="text"
                                                                            class="form-control form-control-sm"
                                                                            id="empno" :value="empDetail.empno"
                                                                            readonly>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <label label class="small mb-1"
                                                                            for="name">사원명</label>
                                                                        <input type="text"
                                                                            class="form-control form-control-sm"
                                                                            v-model="empDetail.name" readonly>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <label label class="small mb-1" for="name">변경 전
                                                                            부서</label>
                                                                        <input type="text"
                                                                            class="form-control form-control-sm"
                                                                            v-model="prevdepartmentname" readonly>
                                                                    </div>
                                                                </div>
                                                                <!-- Form Row 2 (부서 변경) -->
                                                                <div class="form-row">
                                                                    <!-- Form Group (부서) -->
                                                                    <div class="form-group col-md-12">
                                                                        <label class="small mb-1"
                                                                            for="departmentcd">부서</label>
                                                                        <select id="changedepartment"
                                                                            class="form-select form-select-sm"
                                                                            v-model="empDetail.departmentcd"
                                                                            @change="savedepartmentname">
                                                                            <option
                                                                                v-for="(department, i) in departmentList"
                                                                                :key="i"
                                                                                :value="department.departmentcd">{{
                                                                                department.departmentname }}</option>
                                                                        </select>
                                                                        <div class="invalid-feedback">
                                                                            부서를 선택해주세요.
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Wizard tab pane item 3-->
                                                <div class="tab-pane py-5 py-xl-5 fade" id="wizard3" role="tabpanel"
                                                    aria-labelledby="wizard3-tab">
                                                    <div class="row justify-content-center">
                                                        <div class="col-xxl-6">
                                                            <h3 class="text-detault">Step 3</h3>
                                                            <h5 class="card-title">급여 변경</h5>
                                                            <form>
                                                                <!-- Form Row 1 (기본 정보 조회) -->
                                                                <div class="form-row">
                                                                    <div class="form-group col-md-4">
                                                                        <label label class="small mb-1"
                                                                            for="empno">사번</label>
                                                                        <input type="text"
                                                                            class="form-control form-control-sm"
                                                                            id="empno" :value="empDetail.empno"
                                                                            readonly>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <label label class="small mb-1"
                                                                            for="name">사원명</label>
                                                                        <input type="text"
                                                                            class="form-control form-control-sm"
                                                                            v-model="empDetail.name" readonly>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <label label class="small mb-1" for="name">변경 전
                                                                            연봉 (원)</label>
                                                                        <input type="text"
                                                                            class="form-control form-control-sm"
                                                                            :value="currency(prevyearsalary)" readonly>
                                                                    </div>
                                                                </div>
                                                                <!-- Form Row 2 (연봉 변경) -->
                                                                <div class="form-row">
                                                                    <!-- Form Group (연봉) -->
                                                                    <div class="form-group col-md-12">
                                                                        <label class="small mb-1" for="departmentcd">연봉
                                                                            (원)</label>
                                                                        <input type="text"
                                                                            class="form-control form-control-sm"
                                                                            v-model="empDetail.yearsalary" maxlength="9"
                                                                            onkeyup="preventKr(this)"
                                                                            onkeydown="checkNum(event, this.value)"
                                                                            @change="saveyearsalary">
                                                                        </select>
                                                                        <div class="invalid-feedback">
                                                                            연봉을 입력해주세요
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- 변경 사항 확인란 -->
                                                <div class="tab-pane py-5 py-xl-5 fade" id="wizard4" role="tabpanel"
                                                    aria-labelledby="wizard4-tab">
                                                    <div class="row justify-content-center">
                                                        <div class="col-xxl-6">
                                                            <h3 class="text-detault">Step 4</h3>
                                                            <h5 class="card-title">확인</h5>

                                                            <div class="row small text-muted">
                                                                <div class="col-sm-3 text-truncate"><em>승진대상자 사번:</em>
                                                                </div>
                                                                <div class="col">{{ empDetail.empno }}</div>
                                                            </div>
                                                            <div class="row small text-muted">
                                                                <div class="col-sm-3 text-truncate"><em>승진대상자 이름:</em>
                                                                </div>
                                                                <div class="col">{{ empDetail.name }}</div>
                                                            </div>
                                                            <p>
                                                            <div class="row small text-muted">
                                                                <div class="col-sm-3 text-truncate"><em>직급 변동 사항 :</em>
                                                                </div>
                                                                <div class="col">{{ prevgradename }}</div>
                                                                <div class="col">-></div>
                                                                <div class="col">{{ changegradename }}</div>
                                                            </div>
                                                            <div class="row small text-muted">
                                                                <div class="col-sm-3 text-truncate"><em>부서 변동 사항 :</em>
                                                                </div>
                                                                <div class="col">{{ prevdepartmentname }}</div>
                                                                <div class="col">-></div>
                                                                <div class="col">{{ changedepartmentname }}</div>
                                                            </div>
                                                            <div class="row small text-muted">
                                                                <div class="col-sm-3 text-truncate"><em>연봉 변동 사항 :</em>
                                                                </div>
                                                                <div class="col">{{ prevyearsalary }}</div>
                                                                <div class="col">-></div>
                                                                <div class="col">{{ changeyearsalary }}</div>
                                                            </div>
                                                            <hr class="my-4" />
                                                            <div class="row small text-muted">
                                                                <div class="col-sm-3 text-truncate"><em>승인자 사번 :</em>
                                                                </div>
                                                                <div class="col">[[${ loginUserEmpno }]]</div>
                                                            </div>
                                                            <div class="row small text-muted">
                                                                <div class="col-sm-3 text-truncate"><em>승인자 이름 :</em>
                                                                </div>
                                                                <div class="col">[[${ loginName }]]</div>
                                                            </div>
                                                            <div class="row small text-muted">
                                                                <div class="col-sm-3 text-truncate"><em>승인 날짜 :</em>
                                                                </div>
                                                                <div class="col">{{ today }}</div>
                                                            </div>
                                                            <hr class="my-4" />
                                                            <div class="d-flex" style="float: right">
                                                                <button type="button" id="promotionManage"
                                                                    class="btn btn-outline-success shadow-sm btn-sm emp-gray"
                                                                    data-bs-toggle="modal"
                                                                    data-bs-target="#empPromotionManageCheckModal"
                                                                    style="width: 4rem;">완료</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- 사원 승진 및 보직 관리 모달 끝 -->

            <!-- 사원 승진 및 보직 관리 시 경고 모달 시작 -->
            <div class="col-xl-8">
                <div class="modal" id="empPromotionManageCheckModal" data-bs-backdrop="static" data-bs-keyboard="false"
                    tabindex="-1" role="dialog" aria-labelledby="empPromotionManageCheckModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered madal-default" role="document">
                        <div class="modal-content">
                            <div class="modal-body p-0">
                                <!-- details card -->
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <span>인사 발령</span>
                                        <button type="button" class="btn btn-outline-dark shadow-sm btn-sm emp-gray"
                                            style="width: 4rem; float: right;" data-bs-dismiss="modal">닫기
                                        </button>
                                    </div>
                                    <!-- card-body -->
                                    <div class="card-body pb-3" id="card-body-padding">
                                        <form>
                                            <div class="emp-content">
                                                정말로 변경 하시겠습니까?
                                            </div>
                                            <!-- 버튼 -->
                                            <div class="text-center">
                                                <div class="modal-footer">
                                                    <button type="button" id="promotionManage"
                                                        class="btn btn-outline-success shadow-sm btn-sm emp-gray"
                                                        data-bs-toggle="modal" @click="promotionManage"
                                                        style="width: 4rem;">완료</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- 사원 승진 및 보직 관리 시 경고 모달 끝 -->


        </div>
        <!-- empList 끝 -->



        <!-- 사원 등록 모달 시작 -->
        <div class="col-xl-8" id="empRegist">
            <div class="modal fade" id="empRegistModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                role="dialog" aria-labelledby="empRegistModalTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                    <div class="modal-content" style="width: 750px; height: 860px;">
                        <div class="modal-body p-0">
                            <!-- details card -->

                            <div class="card mb-4">
                                <div class="card-header">
                                    <span>사원 등록</span>
                                    <button type="button" class="btn btn-outline-dark shadow-sm btn-sm emp-gray reset"
                                        style="width: 4rem; float: right;" data-bs-dismiss="modal" @click="reset">닫기
                                    </button>
                                </div>
                                <!-- card-body -->
                                <div class="card-body pb-3" id="card-body-padding">
                                    <form class="validation-form" novalidate role="form text-left">
                                        <div id="card-scroll">
                                            <!-- Form Row 1 (기본 정보 등록) -->
                                            <div class="form-row">
                                                <!-- Form Group (사원 증명사진) -->
                                                <div class="form-group col-md-4" style="text-align: center">
                                                    <img class="emp-idPicture" :src="physicalpath"
                                                        style="height: 200; width:143px"
                                                        onerror="this.src='/images/noProfile.png'" />
                                                    <input class="form-control form-control-sm" id="idPicture"
                                                        type="file" @change="uploadImage" accept="image/*" />
                                                    <div class="invalid-feedback">
                                                        사원의 증명사진을 첨부해주세요.
                                                    </div>
                                                </div>
                                                <!-- Form Group (개인정보) -->
                                                <div class="form-group col-md-4">
                                                    <label label class="small mb-1" for="empno">사번</label>
                                                    <input type="text" class="form-control form-control-sm" id="empno"
                                                        :placeholder="empno" disabled>
                                                    <label label class="small mb-1" for="name">사원명</label>
                                                    <input type="text" class="form-control form-control-sm" id="name"
                                                        placeholder="" v-model="name" required>
                                                    <div class="invalid-feedback">
                                                        사원명을 입력해주세요.
                                                    </div>
                                                    <label label class="small mb-1" for="regno">주민등록번호</label>
                                                    <div>
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="regno1" v-model="regno1" maxlength="6"
                                                            pattern="^[0-9]{6}"
                                                            onkeyup="next(this.value, 6, 'regno2'); preventKr(this);"
                                                            onkeydown="checkNum(event, this.value)"
                                                            style="width: 47%; display: inline-block" required>-
                                                        <input type="text" class="form-control form-control-sm"
                                                            id="regno2" v-model="regno2" maxlength="7"
                                                            patttern="^[0-9]{7}" onkeyup="preventKr(this)"
                                                            onkeydown="checkNum(event, this.value)"
                                                            style="width: 48%; display: inline-block;" required>
                                                    </div>
                                                    <div class="invalid-feedback">
                                                        주민등록번호를 입력해주세요.
                                                    </div>
                                                    <label label class="small mb-1" for="tel">연락처</label>
                                                    <div>
                                                        <input type="tel" class="form-control form-control-sm" id="tel1"
                                                            v-model="tel1" maxLength="3" pattern="^01[0-9]{1}"
                                                            onkeyup="next(this.value, 3, 'tel2'); preventKr(this)"
                                                            onkeydown="checkNum(event, this.value)"
                                                            style="width: 30%; display: inline-block;" required>-
                                                        <input type="tel" class="form-control form-control-sm" id="tel2"
                                                            v-model="tel2" maxLength="4" pattern="^[0-9]{4}"
                                                            onkeyup="next(this.value, 4, 'tel3'); preventKr(this)"
                                                            onkeydown="checkNum(event, this.value)"
                                                            style="width: 30%; display: inline-block;" required>-
                                                        <input type="tel" class="form-control form-control-sm" id="tel3"
                                                            v-model="tel3" maxLength="4" pattern="^[0-9]{4}"
                                                            onkeyup="preventKr(this)"
                                                            onkeydown="checkNum(event, this.value)"
                                                            style="width: 30%; display: inline-block;" required>
                                                    </div>
                                                    <div class="invalid-feedback">
                                                        전화번호를 입력해주세요.
                                                    </div>
                                                </div>
                                                <!-- Form Group (개인정보2) -->
                                                <div class="form-group col-md-4">
                                                    <label label class="small mb-1" for="password">비밀번호</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        id="password" :placeholder="tel3" disabled>
                                                    <label label class="small mb-1" for="gender">성별</label>
                                                    <div class="form-control form-control-sm border-0">
                                                        <div class="form-check form-check-inline col-md-5">
                                                            <input class="form-check-input" type="radio" name="gender"
                                                                id="gender-m" v-model="gender" value="남"
                                                                :checked="(this.regno2.substr(0, 1) == 1) || (this.regno2.substr(0, 1) == 3)"
                                                                disabled>
                                                            <label class="form-check-label" for="gender">남</label>
                                                        </div>
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="radio" name="gender"
                                                                id="gender-f" v-model="gender" value="여"
                                                                :checked="(this.regno2.substr(0, 1) == 2) || (this.regno2.substr(0, 1) == 4)"
                                                                disabled>
                                                            <label class="form-check-label" for="gender">여</label>
                                                        </div>
                                                    </div>
                                                    <div class="invalid-feedback">
                                                        주민 번호를 입력하면 자동 입력됩니다.
                                                    </div>
                                                    <label label class="small mb-1" for="school">최종학력</label>
                                                    <input type="text" class="form-control form-control-sm" id="school"
                                                        placeholder="중앙대학교" v-model="school" required>
                                                    <div class="invalid-feedback">
                                                        최종학력를 입력해주세요.
                                                    </div>
                                                    <label label class="small mb-1" for="mail">이메일</label>
                                                    <input type="email" class="form-control form-control-sm" id="mail"
                                                        placeholder="i5-29@erp.com" v-model="mail" required>
                                                    <div class="invalid-feedback">
                                                        메일 주소를 입력해주세요.
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Form Row 2 (주소 등록) -->
                                            <div class="form-row">
                                                <!-- Form Group (주소) -->
                                                <div class="form-group col-md-10">
                                                    <label class="small mb-1" for="addr">주소</label>
                                                    <input type="text" class="form-control form-control-sm" id="addr"
                                                        v-model="addr" required>
                                                    <div class="invalid-feedback">
                                                        주소를 입력해주세요.
                                                    </div>
                                                </div>
                                                <!-- Form Group (주소 검색: 다음 API) -->
                                                <div class="form-group col-md-2" style="align-self: end">
                                                    <input type="button" class="btn btn-hrms shadow-sm btn-sm"
                                                        style="height: 27px; width: 100px; margin-bottom: 0px;"
                                                        @click="execDaumPostcode()" value="주소 검색"><br>
                                                </div>
                                                <!-- Form Group (상세주소) -->
                                                <div class="form-group col-md-8">
                                                    <label class="small mb-1" for="addrdetail">상세주소</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        id="addrdetail" v-model="addrdetail" required>
                                                    <div class="invalid-feedback">
                                                        상세 주소를 입력해주세요.
                                                    </div>
                                                </div>
                                                <!-- Form Group (우편번호) -->
                                                <div class="form-group col-md-4">
                                                    <label class="small mb-1" for="zipcode">우편번호</label>
                                                    <input type="text" class="form-control form-control-sm" id="zipcode"
                                                        v-model="zipcode" maxlength="6" required>
                                                    <div class="invalid-feedback">
                                                        우편번호를 입력해주세요.
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Form Row 3 (월급통장 등록) -->
                                            <div class="form-row">
                                                <!-- Form Group (은행) -->
                                                <div class="form-group col-md-4">
                                                    <label class="small mb-1" for="bankcd">은행</label>
                                                    <select class="form-select form-select-sm" id="bankcd"
                                                        v-model="bankcd" required>
                                                        <option v-for="(bank, i) in bankList" :key="i"
                                                            :value="bank.bankcd">{{ bank.bankname }}</option>
                                                    </select>
                                                    <div class="invalid-feedback">
                                                        은행을 선택해주세요.
                                                    </div>
                                                </div>
                                                <!-- Form Group (계좌번호) -->
                                                <div class="form-group col-md-8">
                                                    <label class="small mb-1" for="account">계좌번호</label>
                                                    <input type="text" class="form-control form-control-sm" id="account"
                                                        placeholder="-를 제외한 숫자만 입력해주세요" v-model="account"
                                                        onkeyup="preventKr(this)"
                                                        onkeydown="checkNum(event, this.value)" required>
                                                    <div class="invalid-feedback">
                                                        계좌번호를 입력해주세요.
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Form Row 4 (부서/직급/권한 등록) -->
                                            <div class="form-row">
                                                <!-- Form Group (부서) -->
                                                <div class="form-group col-md-6">
                                                    <label class="small mb-1" for="departmentcd">부서</label>
                                                    <select class="form-select form-select-sm" v-model="departmentcd"
                                                        @change="setUsertype(departmentcd)" required>
                                                        <option v-for="(department, i) in departmentList" :key="i"
                                                            :value="department.departmentcd">{{
                                                            department.departmentname }}</option>
                                                    </select>
                                                    <div class="invalid-feedback">
                                                        부서를 선택해주세요.
                                                    </div>
                                                </div>
                                                <!-- Form Group (직급) -->
                                                <div class="form-group col-md-6">
                                                    <label class="small mb-1" for="gradecd">직급</label>
                                                    <select class="form-select form-select-sm" v-model="gradecd"
                                                        required>
                                                        <option v-for="(grade, i) in gradeList" :key="i"
                                                            :value="grade.gradecd">{{ grade.gradename }}</option>
                                                    </select>
                                                    <div class="invalid-feedback">
                                                        직급을 선택해주세요.
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Form Row 5 (재직여부/입사일/퇴사일 등록) -->
                                            <div class="form-row">
                                                <!-- Form Group (재직구분) -->
                                                <div class="form-group col-md-4">
                                                    <label label class="small mb-1" for="empStatus">재직구분</label>
                                                    <div class="form-control form-control-sm border-0" id="empStatus">
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="radio"
                                                                name="empStatus" id="retire_n" v-model="retireyn"
                                                                value="n" required>
                                                            <label class="form-check-label" for="retire_n">재직</label>
                                                        </div>
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="radio"
                                                                name="empStatus" id="rest_y" v-model="restyn" value="y"
                                                                disabled>
                                                            <label class="form-check-label" for="rest_y">휴직</label>
                                                        </div>
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="radio"
                                                                name="empStatus" id="retire_y" v-model="retireyn"
                                                                value="y" disabled>
                                                            <label class="form-check-label" for="retire_y">퇴직</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Form Group (입사일) -->
                                                <div class="form-group col-md-4">
                                                    <label class="small mb-1" for="entrydate">입사일</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        id="entrydate" :value="entrydate" disabled>
                                                </div>
                                                <!-- Form Group (연봉) -->
                                                <div class="form-group col-md-4">
                                                    <label class="small mb-1" for="yearsalary">연봉</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        id="yearsalary" v-model="yearsalary" maxlength="9"
                                                        onkeyup="preventKr(this)"
                                                        onkeydown="checkNum(event, this.value)" required>
                                                    <div class="invalid-feedback">
                                                        연봉을 입력해주세요.
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- 기타 -->
                                            <div class="form-row">
                                                <!-- Form Group (비고 등록) -->
                                                <div class="form-group col-md-12">
                                                    <label class="small mb-1" for="memo">비고</label>
                                                    <textarea class="form-control" id="memo" v-model="memo" rows="3"
                                                        maxlength="200"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- 버튼 -->
                                        <div class="text-center">
                                            <div class="modal-footer">
                                                <button id="regist"
                                                    class="btn btn-outline-success shadow-sm btn-sm emp-gray"
                                                    type="button" @click="regist" data-bs-dismiss="modal"
                                                    style="width: 4rem">등록
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 사원 등록 모달 끝 -->

        <!--             script start           -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.10.7/plugin/isBetween.min.js"></script>




        <!-- <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script> -->

        <!-- 달력 -->
        <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
        <script type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
        <link rel="stylesheet" type="text/css"
            href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" /> -->


        <script>
            // 사원 등록 validation
            window.addEventListener('load', () => {
                const forms = document.getElementsByClassName('validation-form');
                const subbutton = document.getElementById('regist');

                Array.prototype.filter.call(forms, (form) => {
                    subbutton.addEventListener('click', function (event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }

                        form.classList.add('was-validated');

                    }, false);
                });
            }, false);

            // 입력 포커스 다음으로 이동
            function next(val, len, nextId) {
                if (val.length == len) {
                    document.getElementById(nextId).focus();
                }
            };

            // 숫자만 입력 가능
            function checkNum(event) {
                const key = event.key;
                if ((key >= 0 && key < 10) || key == 'Backspace') {
                    return true;
                } else {
                    event.preventDefault();
                }
            };

            // 한글 입력 막기
            function preventKr(obj) {
                obj.value = obj.value.replace(/[^0-9.]/gi, "")
            };
        </script>

        <script th:inline="javascript">
            dayjs.extend(dayjs_plugin_isBetween);

            /*<![CDATA[*/
            /* 
                1. 사원 조회 (리스트, 상세정보)
                2. 사원 조회 시 검색 기능 (부서, 직급, 입사일자, 퇴사일자, 사번, 사원명)
                3. 사원 퇴사 처리 
                4. 승진 및 보직관리
                5. 페이징
            */
            const EmpList = {

                data() {
                    return {
                        empList: [], // 사원 리스트
                        empDetail: [], // 사원 상세정보
                        headerNameList: ['사번', '사원명', '부서', '직급', '휴대폰',  // 사원 리스트 컬럼명
                            '이메일', '월급 (원)', '재직여부', '입사일자', '퇴사일자', '상세조회', '인사발령'],

                        departmentList: [], // 부서코드 리스트
                        gradeList: [], // 직급코드 리스트
                        department: '전체', // 부서코드
                        grade: '전체',  // 직급코드

                        menu: '전체', // text검색 - 조건
                        search: '', // text검색 - 검색어
                        entrydatestart: dayjs().subtract(10, "year").format("YYYY-MM-DD"), // 검색 - 입사일자 시작일
                        entrydateend: dayjs().format("YYYY-MM-DD"), // 검색 - 입사일자 종료일
                        // retiredatestart: '', // 검색 - 퇴사일자 시작일
                        // retiredateend: '', // 검색 - 퇴사일자 종료일

                        // 사원 주민번호 조회 관련 필드
                        prevregno: '',
                        sufregno: '',

                        // 사원 전화번호 조회 관련 필드
                        tel1: '',
                        tel2: '',
                        tel3: '',

                        careeryears: '0', // 경력연차

                        // 사원 퇴사 처리 관련 필드
                        retireyn: 'n',
                        retiredate: dayjs().format("YYYY-MM-DD"),
                        retirenote: '',

                        // 사원 데이터 수정 관련 필드
                        empno: '',
                        name: '',
                        mail: '',
                        tel: '',
                        zipcode: '',
                        addr: '',
                        addrdetail: '',
                        school: '',
                        retirementpay: '',
                        memo: '',
                        totalal: '',

                        // 사원 사진 관련 필드
                        file: '',
                        physicalpath: '',

                        // pagination
                        pageNum: 0,
                        pageList: [],

                        // 승진 및 보직 관리 관련 필드
                        loginName: '', // 승진담당자 이름
                        loginUserEmpno: /*[[ ${loginUserEmpno} ]]*/, //승진담당자 사번
                        today: dayjs().format('YYYY-MM-DD'), // 승인 날짜
                        changegradename: '', // 변경 후 직급 이름
                        changedepartmentname: '', // 변경 후 부서 이름
                        changeyearsalary: '', // 변경 후 급여
                        prevgradecd: 'this.empDetail.gradecd', // 변경 전 직급 코드
                        prevgradename: '', // 변경 전 직금 이름
                        prevdepartmentcd: 'this.empDetail.departmentcd', // 변경 전 부서 코드
                        prevdepartmentname: '', // 변경 전 부서 이름
                        prevyearsalary: 'this.empDetail.yearsalary', // 변경 전 급여
                    }
                },

                // pagination
                props: {
                    pageSize: {
                        type: Number,
                        required: false,
                        default: 10,
                    }
                },

                methods: {
                    // 사원 리스트 출력
                    getEmpList() {
                        axios.post("http://localhost:8888/api/hrms")
                            .then((response) => {
                                this.empList = response.data;
                                this.pageList = response.data;

                                this.setPageList();
                            })
                            .catch(error => console.error(error))
                    },

                    // 사원 출력
                    getEmp(empno) {
                        this.empDetail = this.pageList[empno + this.pageNum * this.pageSize];

                        this.name = this.empDetail.name;
                        this.school = this.empDetail.school;
                        this.mail = this.empDetail.mail;
                        this.zipcode = this.empDetail.zipcode;
                        this.addr = this.empDetail.addr;
                        this.addrdetail = this.empDetail.addrdetail;
                        this.memo = this.empDetail.memo;
                        this.physicalpath = this.empDetail.relatedpath + this.empDetail.filename

                        // 주민번호 앞/뒤자리 처리
                        this.prevregno = (this.empDetail.regno).substr(0, 6);
                        this.sufregno = (this.empDetail.regno).substr(6, 7);

                        // 연락처 앞/뒤자리 처리
                        this.tel1 = (this.empDetail.tel).substr(0, 3);
                        this.tel2 = (this.empDetail.tel).substr(3, 4);
                        this.tel3 = (this.empDetail.tel).substr(7, 4);

                        // 경력 연차
                        if (this.empDetail.retireyn === 'y') { // 퇴사자일 경우 퇴직날짜 기준으로 계산
                            this.careeryears = (parseInt((this.empDetail.retiredate).substr(0, 4)) - parseInt((this.empDetail.entrydate).substr(0, 4)));
                        } else { // 재직자일 경우 오늘날짜 기준으로 계산
                            var strDate1 = (dayjs().format()).substr(0, 4);
                            var strDate2 = (this.empDetail.entrydate).substr(0, 4);
                            this.careeryears = parseInt(strDate1) - parseInt(strDate2);
                        }

                        // 승진 및 보직 관리 시 - 이전 직급 및 부서 정보 저장
                        this.prevgradecd = this.empDetail.gradecd;
                        this.prevgradename = this.empDetail.gradename;
                        this.prevdepartmentcd = this.empDetail.departmentcd;
                        this.prevdepartmentname = this.empDetail.departmentname;
                        this.prevyearsalary = this.empDetail.yearsalary;
                    },

                    //파일 업로드
                    uploadImage(event) {
                        const input = event.target.files[0];
                        if (input) {

                            const reader = new FileReader();
                            reader.readAsDataURL(input);
                            this.file = input

                            reader.onload = (e) => {
                                this.physicalpath = e.target.result;
                            }
                        }
                    },

                    // 사원 검색 시 조건: 부서
                    findByDepartment() {
                        axios.post("http://localhost:8888/api/hrms/departmentList")
                            .then((response) => {
                                this.departmentList = response.data;
                            })
                            .catch(error => console.error(error))
                    },

                    // 선택한 부서로 셋팅 
                    setDepartments(department) {
                        this.department = department;
                        this.pageNum = 0;
                        this.setPageList();
                    },

                    // 사원 검색 시 조건: 직급
                    findByGrade() {
                        axios.post("http://localhost:8888/api/hrms/gradeList")
                            .then((response) => {
                                this.gradeList = response.data;
                            })
                            .catch(error => console.error(error))
                    },

                    // 선택한 직급으로 셋팅
                    setGrades(grade) {
                        this.grade = grade;
                        this.pageNum = 0;
                        this.setPageList();
                    },

                    // 선택한 퇴직여부로 셋팅
                    setRetireyn(retireyn) {
                        this.retireyn = retireyn;
                        this.pageNum = 0;
                        this.setPageList();
                    },

                    // 선택한 입사시작 날짜 셋팅
                    setEntrydateStart(entrydatestart) {
                        this.entrydatestart = entrydatestart;
                        this.pageNum = 0;
                        this.setPageList();
                    },

                    // 선택한 입사끝 날짜 셋팅
                    setEntrydateEnd(entrydateend) {
                        this.entrydateend = entrydateend;
                        this.pageNum = 0;
                        this.setPageList();
                    },

                    // 선택한 입사시작 날짜 셋팅
                    setRetiredateStart(retiredatestart) {
                        this.retiredatestart = retiredatestart;
                        this.pageNum = 0;
                        this.setPageList();
                    },

                    // 선택한 입사시작 날짜 셋팅
                    setRetiredateStart(retiredateend) {
                        this.retiredateend = retiredateend;
                        this.pageNum = 0;
                        this.setPageList();
                    },

                    // 선택한 퇴직여부로 셋팅
                    setRetireyn(retireyn) {
                        this.retireyn = retireyn;
                        this.pageNum = 0;
                        this.setPageList();
                    },

                    // 선택한 검색 메뉴로 셋팅
                    setMenu(menu) {
                        this.menu = menu;
                        this.setPageList();
                    },

                    // 선택한 검색어로 셋팅
                    searchEmp(search) {
                        this.search = search;
                        this.pageNum = 0;
                        this.setPageList();
                    },

                    // 전화번호 - 처리
                    parsetel(tel) {
                        return tel.substr(0, 3) + '-' + tel.substr(3, 4) + '-' + tel.substr(7, 4)
                    },

                    // 숫자 세자리마다 , 처리
                    currency(e) {
                        var num = new Number(e);
                        return num.toFixed(0).replace(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g, "$1,")
                    },

                    // 사원 데이터 수정
                    update() {

                        const formData = new FormData();
                        const updateDto = {
                            empno: this.empDetail.empno,
                            name: this.name,
                            mail: this.mail,
                            tel: this.tel1 + this.tel2 + this.tel3,
                            zipcode: this.zipcode,
                            addr: this.addr,
                            addrdetail: this.addrdetail,
                            school: this.school,
                            retirementpay: this.empDetail.retirementpay,
                            memo: this.memo,
                        }

                        formData.append("file", this.file);
                        formData.append("updateDto", new Blob([JSON.stringify(updateDto)], { type: "application/json" }));

                        axios.patch("http://localhost:8888/api/hrms/update", formData
                        ).then((response) => {

                            toastr.options = {
                                closeButton: true,
                                progressBar: true,
                                showMethod: "fadeIn",
                                hideMethod: "fadeOut",
                                timeOut: 2300
                            };
                            toastr.success('사원 정보 수정 완료', 'suscess!');
                            this.getEmpList();

                        }).catch(error => console.error(error))
                    },

                    // 퇴사처리
                    retire() {
                        axios.patch("http://localhost:8888/api/hrms/retire", {
                            empno: this.empDetail.empno,
                            retiredate: this.empDetail.retiredate,
                            retirenote: this.empDetail.retirenote,
                        }).then((response) => {

                            toastr.options = {
                                closeButton: true,
                                progressBar: true,
                                showMethod: "fadeIn",
                                hideMethod: "fadeOut",
                                timeOut: 2300
                            };
                            toastr.success('퇴사 처리 완료', 'suscess!');
                            this.getEmpList();

                        }).catch(error => console.error(error))
                    },

                    // 승진 및 보직 관리
                    promotionManage() {
                        axios.patch("http://localhost:8888/api/hrms/promotionManage", {
                            empno: this.empDetail.empno,

                            prevgradecd: this.prevgradecd,
                            gradecd: this.empDetail.gradecd,

                            prevdepartmentcd: this.prevdepartmentcd,
                            departmentcd: this.empDetail.departmentcd,

                            appempno: this.loginUserEmpno,

                            prevyearsalary: this.prevyearsalary,
                            yearsalary: this.empDetail.yearsalary,

                        }).then((response) => {

                            toastr.options = {
                                closeButton: true,
                                progressBar: true,
                                showMethod: "fadeIn",
                                hideMethod: "fadeOut",
                                timeOut: 2300
                            };
                            toastr.success('인사 발령 완료', 'suscess!');
                            this.getEmpList();

                        }).catch(error => console.log(error))
                    },

                    // pagination
                    nextPage() {
                        this.pageNum += 1;
                    },

                    prevPage() {
                        this.pageNum -= 1;
                    },

                    setPageList() {

                        let temp = [];
                        for (emp of this.empList) {


                            // 사원 조회 시 검색 조건
                            if (
                                ((emp.departmentname === this.department) || (this.department === '전체')) &&
                                ((emp.gradename === this.grade) || (this.grade === '전체')) &&
                                ((emp.retireyn === this.retireyn) || (this.retireyn === '전체')) &&
                                (
                                    (this.menu === '전체' && (this.search == '' || emp.name.includes(this.search) || ((emp.empno).toString()).includes(this.search) || emp.mail.includes(this.search) || emp.tel.includes(this.search))) ||
                                    (this.menu === 'searchName' && (this.search == '' || emp.name.includes(this.search))) ||
                                    (this.menu === 'searchEmpno' && (this.search == '' || ((emp.empno).toString()).includes(this.search)))
                                ) &&
                                (dayjs(emp.entrydate, "YYYY-MM-DD")).isBetween(dayjs(this.entrydatestart, "YYYY-MM-DD") - 1, dayjs(this.entrydateend, "YYYY-MM-DD") + 1)

                                // &&
                                // (
                                //     (emp.retireyn == 'y')
                                //     &&
                                //     (dayjs(emp.retiredate, "YYYY-MM-DD")).isBetween(dayjs(this.retiredatestart, "YYYY-MM-DD"), dayjs(this.retiredateend, "YYYY-MM-DD"))
                                // )
                            ) {
                                temp.push(emp);
                            }
                        }
                        this.pageList = temp;
                    },

                    // 모달 수동 닫기
                    closeModal(modalId) {
                        $(modalId).modal('hide');
                    },

                    // 부서 툴팁
                    toast() {
                        //$("#toastBasicTrigger").on("click", function (e) {
                        //e.preventDefault();
                        $("#toastBasic").toast("show");
                        //});
                    },

                    // 변경 후 grade name 저장
                    savegradename() {
                        this.changegradename = $("#changegrade option:selected").text();
                    },

                    // 변경 후 department name 저장
                    savedepartmentname() {
                        this.changedepartmentname = $("#changedepartment option:selected").text();
                    },

                    // 변경 후 yearsalary 저장
                    saveyearsalary() {
                        this.changeyearsalary = this.empDetail.yearsalary;
                    },

                    // 달력
                    calendar() {

                        $('#demo').daterangepicker({
                            "locale": {
                                "format": "YYYY-MM-DD",
                                "separator": " ~ ",
                                "applyLabel": "확인",
                                "cancelLabel": "취소",
                                "fromLabel": "From",
                                "toLabel": "To",
                                "customRangeLabel": "Custom",
                                "weekLabel": "W",
                                "daysOfWeek": ["일", "월", "화", "수", "목", "금", "토"],
                                "monthNames": ["1월", "2월", "3월", "4월", "5월", "6월", "7월", "8월", "9월", "10월", "11월", "12월"],
                            },
                            "startDate": new Date(),
                            "endDate": new Date(),
                            "drops": "auto"
                        }), function (start, end) {

                        }
                        this.setPageList();
                    },

                },

                computed: {
                    pageCount() {
                        let listLeng = this.pageList.length;
                        listSize = this.pageSize,
                            page = Math.floor(listLeng / listSize);

                        if (listLeng == 0) return 1;
                        if (listLeng % listSize > 0) page += 1;

                        return page;
                    },

                    paginatedData() {
                        let start = this.pageNum * this.pageSize,
                            end = start + this.pageSize;

                        return this.pageList.slice(start, end);
                    },
                },

                created() {
                    this.getEmpList();
                    this.findByDepartment();
                    this.findByGrade();
                },
            }
            Vue.createApp(EmpList).mount('#empList');

            // $('input[name="entrydaterange"]').daterangepicker();
            /*]]>*/
        </script>

        <script>
            /*
                1. 사원 정보 등록
            */
            const RegistEmp = {
                data() {
                    return {
                        empno: '',

                        // 사원 데이터
                        password: '',
                        bankcd: '',
                        departmentcd: '',
                        gradecd: '',
                        usertype: '',
                        name: '',
                        gender: '',
                        mail: '',
                        tel: '',
                        zipcode: '',
                        addr: '',
                        addrdetail: '',
                        regno: '',
                        school: '',
                        entrydate: new Date().toISOString().substr(0, 10).replace('T', ' '),
                        retiredate: '',
                        yearsalary: '', // 연봉
                        salary: '',
                        retirementpay: '',
                        account: '',
                        memo: '',
                        retireyn: 'n', // 퇴직여부 (y -> 퇴직, n -> 재직)
                        restyn: 'n', // 휴직여부
                        privateinsurance: '',
                        paymentst: '',
                        totalal: '',
                        useal: '',
                        retirenote: '',

                        // 사원 주민번호 저장 관련 필드
                        regno1: '',
                        regno2: '',

                        // 사원 전화번호 저장 관련 필드
                        tel1: '',
                        tel2: '',
                        tel3: '',

                        // 사원 사진 저장 관련 필드
                        file: '',
                        physicalpath: '',
                        filesize: '',
                        kind: 2,
                        relatedpath: '',
                        dno: '',

                        // 은행, 부서, 직급, 권한 - 코드 리스트 불러오기
                        bankList: [],
                        departmentList: [],
                        gradeList: [],
                        usertypeList: []

                    }
                },

                methods: {
                    // 사원 등록 
                    regist() {

                        const formData = new FormData();
                        const registDto = {
                            empno: this.empno,
                            password: this.tel3,
                            bankcd: this.bankcd,
                            departmentcd: this.departmentcd,
                            gradecd: this.gradecd,
                            usertype: this.usertype,
                            name: this.name,
                            gender: this.gender,
                            mail: this.mail,
                            tel: this.tel1 + this.tel2 + this.tel3,
                            zipcode: this.zipcode,
                            addr: this.addr,
                            addrdetail: this.addrdetail,
                            regno: this.regno1 + this.regno2,
                            school: this.school,
                            entrydate: this.entrydate,
                            retiredate: null,
                            yearsalary: this.yearsalary,
                            salary: (this.yearsalary / 12),
                            retirementpay: this.retirementpay,
                            account: this.account,
                            memo: this.memo,
                            retireyn: this.retireyn,
                            restyn: this.restyn,
                            privateinsurance: ((this.yearsalary / 12) * 0.03945),
                            paymentst: this.paymentst,
                            totalal: this.totalal,
                            useal: this.useal,
                            retirenote: this.retirenote
                        };

                        formData.append("file", this.file);
                        formData.append("registDto", new Blob([JSON.stringify(registDto)], { type: "application/json" }));

                        axios.post("http://localhost:8888/api/hrms/regist", formData).then((response) => {

                            toastr.options = {
                                closeButton: true,
                                progressBar: true,
                                showMethod: "fadeIn",
                                hideMethod: "fadeOut",
                                timeOut: 2300
                            };
                            toastr.success('사원 등록 완료', 'suscess!');
                            this.getEmpList();

                        }).catch(error => console.error(error))
                    },

                    // 사번 불러오기
                    getEmpno() {
                        axios.post("http://localhost:8888/api/hrms/empno")
                            .then((response) => {
                                this.empno = response.data;
                            })
                            .catch(error => console.error(error))
                    },

                    // 사원 사진 등록
                    uploadImage(event) {
                        const input = event.target.files[0];
                        if (input) {

                            const reader = new FileReader();
                            reader.readAsDataURL(input);
                            this.file = input

                            reader.onload = (e) => {
                                this.physicalpath = e.target.result;
                            }
                        }
                    },

                    // 사원 주소 등록 
                    execDaumPostcode() {
                        new daum.Postcode({
                            oncomplete: (result) => {

                                if (this.addrdetail !== '') { // 상세주소 초기화
                                    this.addrdetail = '';
                                }

                                if (result.userSelectedType === 'R') {
                                    this.addr = result.roadAddress; // 도로명주소 선택
                                } else {
                                    this.addr = result.jibunAddress; // 지번주소 선택 
                                }

                                this.zipcode = result.zonecode; // 새우편번호 

                            }
                        }).open();
                    },

                    // 은행 코드 리스트 
                    getBankList() {
                        axios.post("http://localhost:8888/api/hrms/bankList")
                            .then((response) => {
                                this.bankList = response.data;
                            })
                            .catch(error => console.error(error))
                    },


                    // 부서 코드 리스트 
                    getDepartmentList() {
                        axios.post("http://localhost:8888/api/hrms/departmentList")
                            .then((response) => {
                                this.departmentList = response.data;
                            })
                            .catch(error => console.error(error))
                    },

                    // 직급 코드 리스트 
                    getGradeList() {
                        axios.post("http://localhost:8888/api/hrms/gradeList")
                            .then((response) => {
                                this.gradeList = response.data;
                            })
                            .catch(error => console.error(error))
                    },

                    // 권한 코드 리스트 
                    getUserTypeList() {
                        axios.post("http://localhost:8888/api/hrms/usermasterList")
                            .then((response) => {
                                this.usertypeList = response.data;
                            })
                            .catch(error => console.error(error))
                    },

                    // 권한 셋팅
                    setUsertype(departmentname) {
                        this.usertype = 'ROLE_A'

                        if (departmentname == 'D002' || departmentname == 'D006') {
                            this.usertype = 'ROLE_B'
                        } else if (departmentname == 'D001') {
                            this.usertype = 'ROLE_C'
                        }
                        console.log(this.usertype)
                    },

                    // 닫기 버튼 누르면 초기화
                    reset() {
                        this.password = '',
                            this.bankcd = '',
                            this.departmentcd = '',
                            this.gradecd = '',
                            this.usertype = '',
                            this.name = '',
                            this.gender = '',
                            this.mail = '',
                            this.tel = '',
                            this.zipcode = '',
                            this.addr = '',
                            this.addrdetail = '',
                            this.regno = '',
                            this.school = '',
                            this.retiredate = '',
                            this.yearsalary = '',
                            this.salary = '',
                            this.retirementpay = '',
                            this.account = '',
                            this.memo = '',
                            this.privateinsurance = '',
                            this.paymentst = '',
                            this.totalal = '',
                            this.useal = '',
                            this.retirenote = '',
                            this.filename = '',
                            this.physicalpath = '',
                            this.filesize = '',
                            this.relatedpath = '',
                            this.dno = '',
                            this.regno1 = '',
                            this.regno2 = '',
                            this.tel1 = '',
                            this.tel2 = '',
                            this.tel3 = ''

                        // validation 초기화
                        const forms = document.getElementsByClassName('validation-form');
                        for (form of forms) {
                            form.classList.remove('was-validated');
                        }
                    }
                },

                mounted() {
                    this.getBankList();
                    this.getDepartmentList();
                    this.getGradeList();
                    this.getUserTypeList();
                    this.getEmpno();
                }
            }
            Vue.createApp(RegistEmp).mount('#empRegist');
        </script>
        <!-- <script>
            // 문서에 있는 모든 form을 리셋
            $('.reset').click(function () {
                $('.form-reset')[0].reset();

                // $('.form-reset').each(function () {
                //     this.reset();
                // });
            });
        </script>

        <script>
            $.fn.clearForm = function () {
                return this.each(function () {
                    var type = this.type,
                        tag = this.tagName.toLowerCase();
                    if (tag === 'form') {
                        return $(':input', this).clearForm();
                    }
                    if (
                        type === 'text' ||
                        type === 'password' ||
                        type === 'hidden' ||
                        tag === 'textarea'
                    ) {
                        this.value = '';
                    } else if (type === 'checkbox' || type === 'radio') {
                        this.checked = false;
                    } else if (tag === 'select') {
                        this.selectedIndex = -1;
                    }
                });
            };
        </script> -->

        <!-- 다음 주소 API -->
        <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>





        <!-- 달력 start -->
        <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
        <script type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
        <link rel="stylesheet" type="text/css"
            href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" /> -->

        <script>
            // 입사일자, 퇴사일자 달력으로 검색 (Date Range Picker)
            // $(function () {
            //     let start = moment().subtract(29, "days");
            //     let end = moment();

            //     function cb(start, end) {
            //         $(".date").html(
            //             start.format('YY-MM-DD') + " / " + end.format('YY-MM-DD'),

            //         );
            //     }

            //     $(".date").daterangepicker(
            //         {
            //             startDate: start,
            //             endDate: end,
            //             locale: {
            //                 "separator": " ~ ",
            //                 "format": 'YY-MM-DD',
            //             },
            //             ranges: {
            //                 "오늘": [moment(), moment()],
            //                 "어제": [
            //                     moment().subtract(1, "days"),
            //                     moment().subtract(1, "days"),
            //                 ],
            //                 "최근 7일": [moment().subtract(6, "days"), moment()],
            //                 "최근 30일": [moment().subtract(29, "days"), moment()],
            //                 "이번 달": [
            //                     moment().startOf("month"),
            //                     moment().endOf("month"),
            //                 ],
            //                 "지난 달": [
            //                     moment().subtract(1, "month").startOf("month"),
            //                     moment().subtract(1, "month").endOf("month"),
            //                 ],
            //             },
            //         },
            //         cb(start, end)
            //     );

            // });
        </script>
        <!-- 달력 end -->

        <script>
            // $(function () {
            //     $('#demo').daterangepicker({
            //         "locale": {
            //             "format": "YYYY-MM-DD",
            //             "separator": " ~ ",
            //             "applyLabel": "확인",
            //             "cancelLabel": "취소",
            //             "fromLabel": "From",
            //             "toLabel": "To",
            //             "customRangeLabel": "Custom",
            //             "weekLabel": "W",
            //             "daysOfWeek": ["일", "월", "화", "수", "목", "금", "토"],
            //             "monthNames": ["1월", "2월", "3월", "4월", "5월", "6월", "7월", "8월", "9월", "10월", "11월", "12월"],
            //         },
            //         "startDate": new Date(),
            //         "endDate": new Date(),
            //         "drops": "auto"
            //     }, function (start, end, label) {
            //         console.log('New date range selected: ' + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD') + ' (predefined range: ' + label + ')');
            //     });
            // });

            // $('input[name="entrydaterange"]').daterangepicker()
        </script>





        <!-- <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script> -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
            crossorigin="anonymous"></script>
        <script src="/js/hrms/hrms.js"></script>


        <script src="js/jquery-3.1.1.min.js"></script>


        <!-- Toastr -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"
            integrity="sha512-VEd+nq25CkR676O+pLBnDW09R7VQX9Mdiij052gVCp5yVH3jGtH70Ho/UUv4mJDsEdTvqRCFZg0NKGiojGnUCw=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    </body>
</th:blcok>

</html>